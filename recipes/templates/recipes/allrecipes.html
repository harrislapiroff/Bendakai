{% extends "recipes/base.html" %}
{% load recipes %}
{% load markup %}

{% block title %} All Recipes {% endblock %}

{% block header %}
	<h2>All Recipes</h2>
{% endblock %}

{% block content %}
	{% for r in recipes %}
		<h3 class="recipetitle">{{ r.name }}</h3>
		<ul class="blurb">
			{% ifequal r.user request.user %} 
			<li><a href="{% url edit_recipe id=r.id %}">Edit Recipe</a></li>
			{% endifequal %}
			<li>Added on {{ r.date_added|date:"F j Y" }} by {% ifequal r.user request.user %} you. 
			{% else %} 
				{% if r.user.first_name %} {{ r.user.first_name }} 
					{% if r.user.last_name %} {{ r.user.last_name }} 
					{% endif %} 
				{% else %} 
					{{ r.user.username }}. 
				{% endif %}
			{% endifequal %}</li>
			<li><strong>Yields:</strong> {{ r.servings }} servings.</li>
			<li><strong>Preparation time:</strong> {{ r.prep_time }} minutes.</li>
			<li><strong>Cooking time:</strong> {{ r.cook_time }} minutes.</li>
		</ul>
		<h4>Ingredients</h4>
		<ul class="ingredients">
			{% for i in r.ingredients.all %}
				<li>{% if i.quantity %}{{ i.quantity|html_fraction|safe }} {% endif %} {% if i.unit %} {{ i.unit }} {% endif %} {{ i.ingredient.name }}</li>
			{% endfor %}
		</ul>
		<h4>Directions</h4>
		{{ r.directions|markdown }}
	{% endfor %}
{% endblock %}