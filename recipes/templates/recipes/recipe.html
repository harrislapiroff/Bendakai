{% load recipes %}
{% load markup %}

<div class="recipe">
	<h3 class="recipetitle"><a href="{% url view_recipe id=r.id %}" class="recipe_title">{{ r.name }}</a>&nbsp;&nbsp;<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fhonours.kritigodey.com%2F{{ r.id }}%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;font=arial&amp;colorscheme=light&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe></h3>
	<p class="byline">Added on {{ r.date_added|date:"F j Y" }} by {% ifequal r.user request.user %} <a href="{% url userpage username=r.user.username %}">you {% if not r.is_public %} <strong>(Private)</strong> {% endif %}</a>
	{% else %} 
		<a href="{% url userpage username=r.user.username %}">{% firstof r.user.get_full_name r.user.username %}</a>
	{% endifequal %}  {% ifequal r.user request.user %} <a href="{% url edit_recipe id=r.id %}">(edit recipe)</a>
		{% endifequal %}</p>
	<ul class="blurb">
		{% if r.servings %}<li><strong>Yields:</strong> {{ r.servings }} servings.</li>{% endif %}
		{% if r.prep_time %}<li><strong>Preparation time:</strong> {{ r.prep_time }} minutes.</li>{% endif %}
		{% if r.cook_time %}<li><strong>Cooking time:</strong> {{ r.cook_time }} minutes.</li>{% endif %}
		{% if r.source %}<li><strong>Source:</strong> {{ r.source }}</li>{% endif %}
		{% if r.notes %}<li><strong>Notes:</strong> {{ r.notes }}</li>{% endif %}
	</ul>
	<h4>Ingredients</h4>
	<ul class="ingredients">
		{% for i in r.ingredients.all %}
			<li>{% if i.quantity %}{{ i.quantity|html_fraction|safe }} {% endif %} {% if i.max_quantity %} to {{ i.max_quantity|html_fraction|safe }} {% endif %} {% if i.unit %} {{ i.unit }} {% endif %} {{ i.ingredient.name }}{% if i.preparation %}, {{ i.preparation }} {% endif %} {% if i.optional %}<em>(optional)</em>{% endif %}</li>
		{% endfor %}
	</ul>
	<h4>Directions</h4>
	{{ r.directions|markdown }}
</div>