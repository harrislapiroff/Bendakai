{% extends "recipes/base.html" %}
{% load staticmedia %}

{% block title %} Add Recipe {% endblock %}

{% block extrahead %}
<script type="text/javascript">
$(document).ready(function() {
	$(".recipeingredient_ingredient_field").autocomplete({
		source: "/ajax/ingredient"
	});
	$(".recipeingredient_unit_field").autocomplete({
		source: "/ajax/unit"
	});
});
</script>
<script type="text/javascript" src="{% mediaurl 'recipes/forms.js' %}"></script>
{% endblock %}

{% block header %}
{% endblock %}

{% block content %}
	<h2> Add Recipe </h2>
	<form method="post" action="">
		<table>
		{{ form.as_table }}
			{{ formset.management_form }}
			{% for f in formset.forms %}
				<div class='table'>
					<table class='no_error'>
						{{ f.as_table }}
					</table>
				</div>
			{% endfor %}		
		</table>
		<input type="button" value="Add More" id="add_more">
		<script>
			$('#add_more').click(function() {
				var newForm = cloneMore('div.table:last', 'ingredients');
				$(newForm).find(".recipeingredient_ingredient_field").autocomplete({
					source: "/ajax/ingredient"
				});
				$(newForm).find(".recipeingredient_unit_field").autocomplete({
					source: "/ajax/unit"
				});
			});
		</script>
		{% csrf_token %}
		<input type="submit" />
	</form>
{% endblock %}